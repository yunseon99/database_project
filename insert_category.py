from flask import Flask
from flask_sqlalchemy import SQLAlchemy
from sqlalchemy import text  # text() 함수 임포트

app = Flask(__name__)
app.config['SQLALCHEMY_DATABASE_URI'] = 'mysql+pymysql://root:0000@localhost/library'
app.config['SQLALCHEMY_TRACK_MODIFICATIONS'] = False

db = SQLAlchemy(app)

# 카테고리 데이터 정의
categories = [
    ('000', '총류'),
    ('010', '서지학'),
    ('020', '도서관 및 정보학'),
    ('030', '백과사전'),
    ('040', '미지정'),
    ('050', '정기간행물'),
    ('060', '협회, 조직 및 박물관'),
    ('070', '신문 및 출판'),
    ('080', '명언집'),
    ('090', '희귀본 및 사본'),

    ('100', '철학 및 심리학'),
    ('110', '형이상학'),
    ('120', '인식론'),
    ('130', '초심리학 및 신비학'),
    ('140', '특정 철학 학파'),
    ('150', '심리학'),
    ('160', '논리학'),
    ('170', '윤리학'),
    ('180', '고대 및 중세 철학'),
    ('190', '근대 서양 철학'),

    ('200', '종교'),
    ('210', '종교 철학 및 이론'),
    ('220', '성경'),
    ('230', '기독교 신학'),
    ('240', '기독교 윤리 및 신앙'),
    ('250', '기독교 목회학'),
    ('260', '기독교 사회 신학'),
    ('270', '기독교 역사'),
    ('280', '기독교 교파'),
    ('290', '기타 종교'),

    ('300', '사회과학'),
    ('310', '통계학'),
    ('320', '정치학'),
    ('330', '경제학'),
    ('340', '법학'),
    ('350', '행정학 및 군사학'),
    ('360', '사회 문제 및 서비스'),
    ('370', '교육학'),
    ('380', '상업, 통신 및 교통'),
    ('390', '풍습, 예의 및 민속학'),

    ('400', '언어학'),
    ('410', '언어학 일반'),
    ('420', '영어 및 고대 영어'),
    ('430', '독일어'),
    ('440', '로망스어'),
    ('450', '이탈리아어, 루마니아어'),
    ('460', '스페인어, 포르투갈어'),
    ('470', '라틴어'),
    ('480', '그리스어'),
    ('490', '기타 언어'),

    ('500', '과학'),
    ('510', '수학'),
    ('520', '천문학'),
    ('530', '물리학'),
    ('540', '화학'),
    ('550', '지구과학'),
    ('560', '화석 및 선사 생물학'),
    ('570', '생물학'),
    ('580', '식물학'),
    ('590', '동물학'),

    ('600', '기술'),
    ('610', '의학'),
    ('620', '공학'),
    ('630', '농업'),
    ('640', '가정학 및 가정생활'),
    ('650', '경영학 및 공공 관계'),
    ('660', '화학공학'),
    ('670', '제조업'),
    ('680', '기타 제조 기술'),
    ('690', '건축'),

    ('700', '예술 및 레크리에이션'),
    ('710', '조경 예술'),
    ('720', '건축학'),
    ('730', '조각 및 금속공예'),
    ('740', '도면 및 장식 예술'),
    ('750', '회화'),
    ('760', '판화 및 판화 제작'),
    ('770', '사진 및 컴퓨터 예술'),
    ('780', '음악'),
    ('790', '오락 및 공연 예술'),

    ('800', '문학'),
    ('810', '미국 문학'),
    ('820', '영국 및 고대 영어 문학'),
    ('830', '독일 문학'),
    ('840', '프랑스 문학'),
    ('850', '이탈리아 및 루마니아 문학'),
    ('860', '스페인 및 포르투갈 문학'),
    ('870', '라틴 문학'),
    ('880', '그리스 문학'),
    ('890', '기타 문학'),

    ('900', '역사 및 지리'),
    ('910', '지리학 및 여행'),
    ('920', '전기 및 족보'),
    ('930', '고대 세계 역사'),
    ('940', '유럽 역사'),
    ('950', '아시아 역사'),
    ('960', '아프리카 역사'),
    ('970', '북아메리카 역사'),
    ('980', '남아메리카 역사'),
    ('990', '기타 지역 역사')
]

# 데이터 삽입
if __name__ == "__main__":
    with app.app_context():
        for cat_id, description in categories:
            query = text("""
                INSERT INTO category (id, description)
                VALUES (:id, :description)
                ON DUPLICATE KEY UPDATE description = :description
            """)
            db.session.execute(query, {"id": cat_id, "description": description})
        db.session.commit()
        print("카테고리 데이터 삽입 완료!")
